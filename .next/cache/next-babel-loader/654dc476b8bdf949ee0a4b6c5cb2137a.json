{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createSelector } from 'reselect';\nimport get from 'lodash.get';\nimport { WORK_SOURCE, WORK_LABEL_SOURCE, WORK_PATH_SOURCE } from 'constants/source';\nimport colors from 'styles/theme/colors';\nimport { selectGeoJson, selectLookup, selectGeoJsonBounds, selectWorkPathGeoJson, selectChronologicalFeatureIds } from '../geojson/selectors';\nexport const selectMapState = state => state.map;\nexport const selectMapLoaded = createSelector(selectMapState, map => get(map, 'mapLoaded', false));\nexport const selectMapConfig = createSelector(selectMapState, selectGeoJsonBounds, ({\n  config\n}, bounds) => _objectSpread({}, config, {\n  bounds\n}));\n\nconst makeHoverCase = (hoverValue, defaultValue) => ['case', ['boolean', ['feature-state', 'hover'], false], hoverValue, defaultValue];\n\nconst makeSelectedCase = (selectedValue, defaultValue) => ['case', ['boolean', ['feature-state', 'selected'], false], selectedValue, defaultValue];\n\nexport const selectMapLayers = createSelector(selectGeoJson, selectWorkPathGeoJson, (data, lineData) => [{\n  id: WORK_PATH_SOURCE,\n  type: 'line',\n  source: {\n    type: 'geojson',\n    data: lineData\n  },\n  paint: {\n    'line-color': colors.text2,\n    'line-opacity': 0.5,\n    'line-width': 1\n  }\n}, {\n  id: WORK_SOURCE,\n  type: 'circle',\n  source: {\n    type: 'geojson',\n    data\n  },\n  paint: {\n    'circle-color': colors.ctaBackground1,\n    'circle-radius': makeSelectedCase(8, 6),\n    'circle-stroke-width': makeSelectedCase(10, makeHoverCase(8, 5)),\n    'circle-stroke-color': colors.ctaBackground1,\n    'circle-stroke-opacity': makeHoverCase(0.3, 0.2)\n  }\n}, {\n  id: WORK_LABEL_SOURCE,\n  type: 'symbol',\n  source: {\n    type: 'geojson',\n    data\n  },\n  paint: {\n    'text-color': colors.text2\n  },\n  layout: {\n    'text-field': '{company}',\n    'text-font': ['Andale Mono Regular'],\n    'text-anchor': 'left',\n    'text-offset': [1.5, 0.3],\n    'text-transform': 'uppercase'\n  }\n}]);\nexport const selectHoveredFeatureId = createSelector(selectMapState, map => get(map, 'hoveredFeatureId'));\nexport const selectSelectedFeatureId = createSelector(selectMapState, map => get(map, 'selectedFeatureId'));\nexport const selectIsFeatureSelected = createSelector(selectSelectedFeatureId, id => !!id);\nexport const selectSelectedFeature = createSelector(selectSelectedFeatureId, selectLookup, (id, lookup) => get(lookup, id, {}));\nexport const selectIsFirstFeatureSelected = createSelector(selectSelectedFeatureId, selectChronologicalFeatureIds, (id, ids) => ids.indexOf(id) === 0);\nexport const selectIsLastFeatureSelected = createSelector(selectSelectedFeatureId, selectChronologicalFeatureIds, (id, ids) => ids.indexOf(id) === ids.length - 1);\nexport const selectPrevFeatureId = createSelector(selectSelectedFeatureId, selectChronologicalFeatureIds, selectIsFirstFeatureSelected, (id, ids, bail) => {\n  if (bail) return id;\n  return ids[ids.indexOf(id) - 1];\n});\nexport const selectNextFeatureId = createSelector(selectSelectedFeatureId, selectChronologicalFeatureIds, selectIsLastFeatureSelected, (id, ids, bail) => {\n  if (bail) return id;\n  return ids[ids.indexOf(id) + 1];\n});\nexport const selectPopupId = createSelector(selectMapState, map => map.popupId);","map":{"version":3,"sources":["/Users/cliftoncampbell/Development/clif.world/modules/map/selectors.js"],"names":["createSelector","get","WORK_SOURCE","WORK_LABEL_SOURCE","WORK_PATH_SOURCE","colors","selectGeoJson","selectLookup","selectGeoJsonBounds","selectWorkPathGeoJson","selectChronologicalFeatureIds","selectMapState","state","map","selectMapLoaded","selectMapConfig","config","bounds","makeHoverCase","hoverValue","defaultValue","makeSelectedCase","selectedValue","selectMapLayers","data","lineData","id","type","source","paint","text2","ctaBackground1","layout","selectHoveredFeatureId","selectSelectedFeatureId","selectIsFeatureSelected","selectSelectedFeature","lookup","selectIsFirstFeatureSelected","ids","indexOf","selectIsLastFeatureSelected","length","selectPrevFeatureId","bail","selectNextFeatureId","selectPopupId","popupId"],"mappings":"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","sourcesContent":["import { createSelector } from 'reselect';\nimport get from 'lodash.get';\nimport {\n  WORK_SOURCE,\n  WORK_LABEL_SOURCE,\n  WORK_PATH_SOURCE,\n} from 'constants/source';\nimport colors from 'styles/theme/colors';\nimport {\n  selectGeoJson,\n  selectLookup,\n  selectGeoJsonBounds,\n  selectWorkPathGeoJson,\n  selectChronologicalFeatureIds,\n} from '../geojson/selectors';\n\nexport const selectMapState = (state) => state.map;\n\nexport const selectMapLoaded = createSelector(selectMapState, (map) =>\n  get(map, 'mapLoaded', false),\n);\n\nexport const selectMapConfig = createSelector(\n  selectMapState,\n  selectGeoJsonBounds,\n  ({ config }, bounds) => ({\n    ...config,\n    bounds,\n  }),\n);\n\nconst makeHoverCase = (hoverValue, defaultValue) => [\n  'case',\n  ['boolean', ['feature-state', 'hover'], false],\n  hoverValue,\n  defaultValue,\n];\n\nconst makeSelectedCase = (selectedValue, defaultValue) => [\n  'case',\n  ['boolean', ['feature-state', 'selected'], false],\n  selectedValue,\n  defaultValue,\n];\n\nexport const selectMapLayers = createSelector(\n  selectGeoJson,\n  selectWorkPathGeoJson,\n  (data, lineData) => [\n    {\n      id: WORK_PATH_SOURCE,\n      type: 'line',\n      source: {\n        type: 'geojson',\n        data: lineData,\n      },\n      paint: {\n        'line-color': colors.text2,\n        'line-opacity': 0.5,\n        'line-width': 1,\n      },\n    },\n    {\n      id: WORK_SOURCE,\n      type: 'circle',\n      source: {\n        type: 'geojson',\n        data,\n      },\n      paint: {\n        'circle-color': colors.ctaBackground1,\n        'circle-radius': makeSelectedCase(8, 6),\n        'circle-stroke-width': makeSelectedCase(\n          10,\n          makeHoverCase(8, 5),\n        ),\n        'circle-stroke-color': colors.ctaBackground1,\n        'circle-stroke-opacity': makeHoverCase(0.3, 0.2),\n      },\n    },\n    {\n      id: WORK_LABEL_SOURCE,\n      type: 'symbol',\n      source: {\n        type: 'geojson',\n        data,\n      },\n      paint: {\n        'text-color': colors.text2,\n      },\n      layout: {\n        'text-field': '{company}',\n        'text-font': ['Andale Mono Regular'],\n        'text-anchor': 'left',\n        'text-offset': [1.5, 0.3],\n        'text-transform': 'uppercase',\n      },\n    },\n  ],\n);\n\nexport const selectHoveredFeatureId = createSelector(\n  selectMapState,\n  (map) => get(map, 'hoveredFeatureId'),\n);\n\nexport const selectSelectedFeatureId = createSelector(\n  selectMapState,\n  (map) => get(map, 'selectedFeatureId'),\n);\n\nexport const selectIsFeatureSelected = createSelector(\n  selectSelectedFeatureId,\n  (id) => !!id,\n);\n\nexport const selectSelectedFeature = createSelector(\n  selectSelectedFeatureId,\n  selectLookup,\n  (id, lookup) => get(lookup, id, {}),\n);\n\nexport const selectIsFirstFeatureSelected = createSelector(\n  selectSelectedFeatureId,\n  selectChronologicalFeatureIds,\n  (id, ids) => ids.indexOf(id) === 0,\n);\n\nexport const selectIsLastFeatureSelected = createSelector(\n  selectSelectedFeatureId,\n  selectChronologicalFeatureIds,\n  (id, ids) => ids.indexOf(id) === ids.length - 1,\n);\n\nexport const selectPrevFeatureId = createSelector(\n  selectSelectedFeatureId,\n  selectChronologicalFeatureIds,\n  selectIsFirstFeatureSelected,\n  (id, ids, bail) => {\n    if (bail) return id;\n    return ids[ids.indexOf(id) - 1];\n  },\n);\n\nexport const selectNextFeatureId = createSelector(\n  selectSelectedFeatureId,\n  selectChronologicalFeatureIds,\n  selectIsLastFeatureSelected,\n  (id, ids, bail) => {\n    if (bail) return id;\n    return ids[ids.indexOf(id) + 1];\n  },\n);\n\nexport const selectPopupId = createSelector(\n  selectMapState,\n  (map) => map.popupId,\n);\n"]},"metadata":{},"sourceType":"module"}