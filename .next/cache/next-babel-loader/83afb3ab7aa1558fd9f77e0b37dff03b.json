{"ast":null,"code":"import _classCallCheck from \"/Users/cliftoncampbell/Development/clif.world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/cliftoncampbell/Development/clif.world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/cliftoncampbell/Development/clif.world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/cliftoncampbell/Development/clif.world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/cliftoncampbell/Development/clif.world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"/Users/cliftoncampbell/Development/clif.world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/cliftoncampbell/Development/clif.world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/Users/cliftoncampbell/Development/clif.world/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _styled from \"@emotion/styled-base\";\nvar _jsxFileName = \"/Users/cliftoncampbell/Development/clif.world/_pages/Home/Globe.jsx\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal[\"default\"].signature : function (a) {\n  return a;\n};\n\nimport React, { Component } from 'react';\nimport { get } from 'lodash-es';\nimport { feature } from 'topojson';\nimport lands from './ne110m_land.json';\nimport { jsx as ___EmotionJSX } from \"@emotion/core\";\nvar countries = feature(lands, lands.objects.land);\n\nvar geojson = _objectSpread({}, countries, {\n  features: countries.features\n});\n\nvar normalizeCursorLocation = function normalizeCursorLocation(_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      x = _ref2[0],\n      y = _ref2[1];\n\n  var _window = window,\n      innerWidth = _window.innerWidth,\n      innerHeight = _window.innerHeight;\n\n  var _x = (x - innerWidth / 2) / (innerWidth / 2);\n\n  var _y = -(y - innerHeight / 2) / (innerHeight / 2);\n\n  return [_x, _y];\n};\n\nvar bufferChange = function bufferChange(val, oldVal) {\n  var difference = oldVal - val;\n  var max = 0.1;\n  var smallerChange = difference < 0 ? max : -max;\n  return Math.abs(difference) > max ? oldVal + smallerChange : val;\n};\n\nvar Canvas = _styled(\"canvas\", {\n  target: \"eml2ifg0\",\n  label: \"Canvas\"\n})(false ? {\n  name: \"1ntfbxl\",\n  styles: \"fill:transparent;\"\n} : {\n  name: \"1ntfbxl\",\n  styles: \"fill:transparent;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jbGlmdG9uY2FtcGJlbGwvRGV2ZWxvcG1lbnQvY2xpZi53b3JsZC9fcGFnZXMvSG9tZS9HbG9iZS5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMEI0QiIsImZpbGUiOiIvVXNlcnMvY2xpZnRvbmNhbXBiZWxsL0RldmVsb3BtZW50L2NsaWYud29ybGQvX3BhZ2VzL0hvbWUvR2xvYmUuanN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdldCB9IGZyb20gJ2xvZGFzaC1lcyc7XG5pbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5pbXBvcnQgeyBmZWF0dXJlIH0gZnJvbSAndG9wb2pzb24nO1xuaW1wb3J0IGxhbmRzIGZyb20gJy4vbmUxMTBtX2xhbmQuanNvbic7XG5cbmNvbnN0IGNvdW50cmllcyA9IGZlYXR1cmUobGFuZHMsIGxhbmRzLm9iamVjdHMubGFuZCk7XG5jb25zdCBnZW9qc29uID0ge1xuICAuLi5jb3VudHJpZXMsXG4gIGZlYXR1cmVzOiBjb3VudHJpZXMuZmVhdHVyZXMsXG59O1xuXG5jb25zdCBub3JtYWxpemVDdXJzb3JMb2NhdGlvbiA9IChbeCwgeV0pID0+IHtcbiAgY29uc3QgeyBpbm5lcldpZHRoLCBpbm5lckhlaWdodCB9ID0gd2luZG93O1xuICBjb25zdCBfeCA9ICh4IC0gaW5uZXJXaWR0aCAvIDIpIC8gKGlubmVyV2lkdGggLyAyKTtcbiAgY29uc3QgX3kgPSAtKHkgLSBpbm5lckhlaWdodCAvIDIpIC8gKGlubmVySGVpZ2h0IC8gMik7XG4gIHJldHVybiBbX3gsIF95XTtcbn07XG5cbmNvbnN0IGJ1ZmZlckNoYW5nZSA9ICh2YWwsIG9sZFZhbCkgPT4ge1xuICBjb25zdCBkaWZmZXJlbmNlID0gb2xkVmFsIC0gdmFsO1xuICBjb25zdCBtYXggPSAwLjE7XG4gIGNvbnN0IHNtYWxsZXJDaGFuZ2UgPSBkaWZmZXJlbmNlIDwgMCA/IG1heCA6IC1tYXg7XG4gIHJldHVybiBNYXRoLmFicyhkaWZmZXJlbmNlKSA+IG1heCA/IG9sZFZhbCArIHNtYWxsZXJDaGFuZ2UgOiB2YWw7XG59O1xuXG5jb25zdCBDYW52YXMgPSBzdHlsZWQuY2FudmFzYFxuICBmaWxsOiB0cmFuc3BhcmVudDtcbmA7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdsb2JlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29vcmRzID0gWzAsIDBdO1xuXG4gIHJvdGF0aW9uWSA9IDA7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuZ2xvYmVTaXplID1cbiAgICAgIE1hdGgubWF4KHdpbmRvdy5pbm5lckhlaWdodCwgd2luZG93LmlubmVyV2lkdGgpICsgMjAwO1xuICAgIHRoaXMudHJhbnNsYXRlWCA9IHRoaXMuZ2xvYmVTaXplIC8gMjtcbiAgICB0aGlzLnRyYW5zbGF0ZVkgPSB0aGlzLmdsb2JlU2l6ZSAvIDI7XG4gICAgdGhpcy5yb3RhdGlvblggPSB0aGlzLmdsb2JlU2l6ZTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGNvbnN0IHN2ZyA9IGQzLnNlbGVjdCgnI2dsb2JlJyk7XG4gICAgY29uc3QgY29udGV4dCA9IHN2Zy5ub2RlKCkuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjb25zdCBwcm9qZWN0aW9uID0gZDNcbiAgICAgIC5nZW9PcnRob2dyYXBoaWMoKVxuICAgICAgLmZpdFNpemUoW3RoaXMuZ2xvYmVTaXplLCB0aGlzLmdsb2JlU2l6ZV0sIGdlb2pzb24pXG4gICAgICAucm90YXRlKFt0aGlzLnJvdGF0aW9uWCwgdGhpcy5yb3RhdGlvblldKVxuICAgICAgLmNsaXBBbmdsZSgxODApXG4gICAgICAudHJhbnNsYXRlKFt0aGlzLnRyYW5zbGF0ZVgsIHRoaXMudHJhbnNsYXRlWV0pO1xuICAgIGNvbnN0IHBhdGggPSBkMy5nZW9QYXRoKCkucHJvamVjdGlvbihwcm9qZWN0aW9uKS5jb250ZXh0KGNvbnRleHQpO1xuICAgIHRoaXMudGltZXIgPSBkMy50aW1lcigoKSA9PiB7XG4gICAgICBjb25zdCBjaGFuZ2UgPSB0aGlzLmNvb3Jkc1swXSA+PSAwID8gLTAuMDIgOiAwLjAyO1xuICAgICAgdGhpcy5yb3RhdGlvblggKz0gY2hhbmdlO1xuICAgICAgdGhpcy5yb3RhdGlvblkgPSBidWZmZXJDaGFuZ2UodGhpcy5jb29yZHNbMV0sIHRoaXMucm90YXRpb25ZKTtcbiAgICAgIHRoaXMudHJhbnNsYXRlWCA9IGJ1ZmZlckNoYW5nZShcbiAgICAgICAgdGhpcy5nbG9iZVNpemUgLyAyICsgdGhpcy5jb29yZHNbMF0sXG4gICAgICAgIHRoaXMudHJhbnNsYXRlWCxcbiAgICAgICk7XG4gICAgICB0aGlzLnRyYW5zbGF0ZVkgPSBidWZmZXJDaGFuZ2UoXG4gICAgICAgIHRoaXMuZ2xvYmVTaXplIC8gMiArIHRoaXMuY29vcmRzWzFdLFxuICAgICAgICB0aGlzLnRyYW5zbGF0ZVksXG4gICAgICApO1xuICAgICAgcHJvamVjdGlvblxuICAgICAgICAucm90YXRlKFt0aGlzLnJvdGF0aW9uWCwgdGhpcy5yb3RhdGlvblldKVxuICAgICAgICAudHJhbnNsYXRlKFt0aGlzLnRyYW5zbGF0ZVgsIHRoaXMudHJhbnNsYXRlWV0pO1xuICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5nbG9iZVNpemUsIHRoaXMuZ2xvYmVTaXplKTtcbiAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICBwYXRoKGNvdW50cmllcyk7XG4gICAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICcjMTExJztcbiAgICAgIGNvbnRleHQuZmlsbCgpO1xuICAgICAgY29udGV4dC5saW5lV2lkdGggPSAwLjU7XG4gICAgICBjb250ZXh0LnN0cm9rZUNvbG9yID0gJyMwMDAnO1xuICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMubW91c2VMaXN0ZW5lciA9IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ21vdXNlbW92ZScsXG4gICAgICB0aGlzLm9uR2xvYmFsTW91c2VNb3ZlLFxuICAgICk7XG4gICAgdGhpcy50b3VjaExpc3RlbmVyID0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAndG91Y2htb3ZlJyxcbiAgICAgIHRoaXMub25HbG9iYWxUb3VjaE1vdmUsXG4gICAgKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLnRvdWNoTGlzdGVuZXIpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm1vdXNlTGlzdGVuZXIpO1xuICAgIHRoaXMudGltZXIuc3RvcCgpO1xuICB9XG5cbiAgb25HbG9iYWxUb3VjaE1vdmUgPSAoZSkgPT4ge1xuICAgIGNvbnN0IHsgY2xpZW50WCwgY2xpZW50WSB9ID0gZ2V0KGUsICd0b3VjaGVzWzBdJyk7XG4gICAgaWYgKCFjbGllbnRYIHx8ICFjbGllbnRZKSByZXR1cm47XG4gICAgdGhpcy5jb29yZHMgPSBub3JtYWxpemVDdXJzb3JMb2NhdGlvbihbY2xpZW50WCwgY2xpZW50WV0pO1xuICB9O1xuXG4gIG9uR2xvYmFsTW91c2VNb3ZlID0gKHsgY2xpZW50WCwgY2xpZW50WSB9KSA9PiB7XG4gICAgdGhpcy5jb29yZHMgPSBub3JtYWxpemVDdXJzb3JMb2NhdGlvbihbY2xpZW50WCwgY2xpZW50WV0pO1xuICB9O1xuXG4gIGdldFBhdGhTdHJpbmcgPSAoKSA9PiB7fTtcblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxDYW52YXNcbiAgICAgICAgaWQ9XCJnbG9iZVwiXG4gICAgICAgIHdpZHRoPXtgJHt0aGlzLmdsb2JlU2l6ZX1gfVxuICAgICAgICBoZWlnaHQ9e2Ake3RoaXMuZ2xvYmVTaXplfWB9XG4gICAgICAgIHZpZXdCb3g9e2AwIDAgJHt0aGlzLmdsb2JlU2l6ZX0gJHt0aGlzLmdsb2JlU2l6ZX1gfVxuICAgICAgLz5cbiAgICApO1xuICB9XG59XG4iXX0= */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n});\n\nvar Globe = /*#__PURE__*/function (_Component) {\n  _inherits(Globe, _Component);\n\n  var _super = _createSuper(Globe);\n\n  function Globe() {\n    var _this;\n\n    _classCallCheck(this, Globe);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"coords\", [0, 0]);\n\n    _defineProperty(_assertThisInitialized(_this), \"rotationY\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"onGlobalTouchMove\", function (e) {\n      var _get = get(e, 'touches[0]'),\n          clientX = _get.clientX,\n          clientY = _get.clientY;\n\n      if (!clientX || !clientY) return;\n      _this.coords = normalizeCursorLocation([clientX, clientY]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onGlobalMouseMove\", function (_ref3) {\n      var clientX = _ref3.clientX,\n          clientY = _ref3.clientY;\n      _this.coords = normalizeCursorLocation([clientX, clientY]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getPathString\", function () {});\n\n    _this.globeSize = Math.max(window.innerHeight, window.innerWidth) + 200;\n    _this.translateX = _this.globeSize / 2;\n    _this.translateY = _this.globeSize / 2;\n    _this.rotationX = _this.globeSize;\n    return _this;\n  }\n\n  _createClass(Globe, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var svg = d3.select('#globe');\n      var context = svg.node().getContext('2d');\n      var projection = d3.geoOrthographic().fitSize([this.globeSize, this.globeSize], geojson).rotate([this.rotationX, this.rotationY]).clipAngle(180).translate([this.translateX, this.translateY]);\n      var path = d3.geoPath().projection(projection).context(context);\n      this.timer = d3.timer(function () {\n        var change = _this2.coords[0] >= 0 ? -0.02 : 0.02;\n        _this2.rotationX += change;\n        _this2.rotationY = bufferChange(_this2.coords[1], _this2.rotationY);\n        _this2.translateX = bufferChange(_this2.globeSize / 2 + _this2.coords[0], _this2.translateX);\n        _this2.translateY = bufferChange(_this2.globeSize / 2 + _this2.coords[1], _this2.translateY);\n        projection.rotate([_this2.rotationX, _this2.rotationY]).translate([_this2.translateX, _this2.translateY]);\n        context.clearRect(0, 0, _this2.globeSize, _this2.globeSize);\n        context.beginPath();\n        path(countries);\n        context.fillStyle = '#111';\n        context.fill();\n        context.lineWidth = 0.5;\n        context.strokeColor = '#000';\n        context.stroke();\n      });\n      this.mouseListener = window.addEventListener('mousemove', this.onGlobalMouseMove);\n      this.touchListener = window.addEventListener('touchmove', this.onGlobalTouchMove);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('touchmove', this.touchListener);\n      window.removeEventListener('mousemove', this.mouseListener);\n      this.timer.stop();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return ___EmotionJSX(Canvas, {\n        id: \"globe\",\n        width: \"\".concat(this.globeSize),\n        height: \"\".concat(this.globeSize),\n        viewBox: \"0 0 \".concat(this.globeSize, \" \").concat(this.globeSize),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 7\n        }\n      });\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return Globe;\n}(Component);\n\nexport { Globe as default };\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(countries, \"countries\", \"/Users/cliftoncampbell/Development/clif.world/_pages/Home/Globe.jsx\");\n  reactHotLoader.register(geojson, \"geojson\", \"/Users/cliftoncampbell/Development/clif.world/_pages/Home/Globe.jsx\");\n  reactHotLoader.register(normalizeCursorLocation, \"normalizeCursorLocation\", \"/Users/cliftoncampbell/Development/clif.world/_pages/Home/Globe.jsx\");\n  reactHotLoader.register(bufferChange, \"bufferChange\", \"/Users/cliftoncampbell/Development/clif.world/_pages/Home/Globe.jsx\");\n  reactHotLoader.register(Canvas, \"Canvas\", \"/Users/cliftoncampbell/Development/clif.world/_pages/Home/Globe.jsx\");\n  reactHotLoader.register(Globe, \"Globe\", \"/Users/cliftoncampbell/Development/clif.world/_pages/Home/Globe.jsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/Users/cliftoncampbell/Development/clif.world/_pages/Home/Globe.jsx"],"names":["React","Component","get","feature","lands","countries","objects","land","geojson","features","normalizeCursorLocation","x","y","window","innerWidth","innerHeight","_x","_y","bufferChange","val","oldVal","difference","max","smallerChange","Math","abs","Canvas","Globe","e","clientX","clientY","coords","globeSize","translateX","translateY","rotationX","svg","d3","select","context","node","getContext","projection","geoOrthographic","fitSize","rotate","rotationY","clipAngle","translate","path","geoPath","timer","change","clearRect","beginPath","fillStyle","fill","lineWidth","strokeColor","stroke","mouseListener","addEventListener","onGlobalMouseMove","touchListener","onGlobalTouchMove","removeEventListener","stop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { get } from 'lodash-es';\nimport styled from '@emotion/styled';\nimport { feature } from 'topojson';\nimport lands from './ne110m_land.json';\n\nconst countries = feature(lands, lands.objects.land);\nconst geojson = {\n  ...countries,\n  features: countries.features,\n};\n\nconst normalizeCursorLocation = ([x, y]) => {\n  const { innerWidth, innerHeight } = window;\n  const _x = (x - innerWidth / 2) / (innerWidth / 2);\n  const _y = -(y - innerHeight / 2) / (innerHeight / 2);\n  return [_x, _y];\n};\n\nconst bufferChange = (val, oldVal) => {\n  const difference = oldVal - val;\n  const max = 0.1;\n  const smallerChange = difference < 0 ? max : -max;\n  return Math.abs(difference) > max ? oldVal + smallerChange : val;\n};\n\nconst Canvas = styled.canvas`\n  fill: transparent;\n`;\n\nexport default class Globe extends Component {\n  coords = [0, 0];\n\n  rotationY = 0;\n\n  constructor() {\n    super();\n\n    this.globeSize =\n      Math.max(window.innerHeight, window.innerWidth) + 200;\n    this.translateX = this.globeSize / 2;\n    this.translateY = this.globeSize / 2;\n    this.rotationX = this.globeSize;\n  }\n\n  componentDidMount() {\n    const svg = d3.select('#globe');\n    const context = svg.node().getContext('2d');\n    const projection = d3\n      .geoOrthographic()\n      .fitSize([this.globeSize, this.globeSize], geojson)\n      .rotate([this.rotationX, this.rotationY])\n      .clipAngle(180)\n      .translate([this.translateX, this.translateY]);\n    const path = d3.geoPath().projection(projection).context(context);\n    this.timer = d3.timer(() => {\n      const change = this.coords[0] >= 0 ? -0.02 : 0.02;\n      this.rotationX += change;\n      this.rotationY = bufferChange(this.coords[1], this.rotationY);\n      this.translateX = bufferChange(\n        this.globeSize / 2 + this.coords[0],\n        this.translateX,\n      );\n      this.translateY = bufferChange(\n        this.globeSize / 2 + this.coords[1],\n        this.translateY,\n      );\n      projection\n        .rotate([this.rotationX, this.rotationY])\n        .translate([this.translateX, this.translateY]);\n      context.clearRect(0, 0, this.globeSize, this.globeSize);\n      context.beginPath();\n      path(countries);\n      context.fillStyle = '#111';\n      context.fill();\n      context.lineWidth = 0.5;\n      context.strokeColor = '#000';\n      context.stroke();\n    });\n\n    this.mouseListener = window.addEventListener(\n      'mousemove',\n      this.onGlobalMouseMove,\n    );\n    this.touchListener = window.addEventListener(\n      'touchmove',\n      this.onGlobalTouchMove,\n    );\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('touchmove', this.touchListener);\n    window.removeEventListener('mousemove', this.mouseListener);\n    this.timer.stop();\n  }\n\n  onGlobalTouchMove = (e) => {\n    const { clientX, clientY } = get(e, 'touches[0]');\n    if (!clientX || !clientY) return;\n    this.coords = normalizeCursorLocation([clientX, clientY]);\n  };\n\n  onGlobalMouseMove = ({ clientX, clientY }) => {\n    this.coords = normalizeCursorLocation([clientX, clientY]);\n  };\n\n  getPathString = () => {};\n\n  render() {\n    return (\n      <Canvas\n        id=\"globe\"\n        width={`${this.globeSize}`}\n        height={`${this.globeSize}`}\n        viewBox={`0 0 ${this.globeSize} ${this.globeSize}`}\n      />\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}